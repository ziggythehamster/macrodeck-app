<% if item.errors %>
	<div class="errors">
		<ul>
			<% item.errors.full_messages.each do |e| %>
				<li><%= h e %></li>
			<% end %>
		</ul>
	</div>
<% end %>

<div class="field"><%= MacroDeck::TitleBehavior.new(item).to_form_field %></div>

<%

if object.fields_by_priority
	object.fields_by_priority.each do |priority_set|
		priority_set[1].each do |f|
			behavior = "#{f.to_s}_behavior".camelize
			behavior = "MacroDeck::#{behavior}"
%>
			<% begin %>
				<div class="field"><%= behavior.constantize.new(item).to_form_field %></div>
			<% rescue NameError %>
				<% unless object.introspections[f.to_sym][:internal] %>
					<div class="field">
						<label for="<%= Rack::Utils.escape_html(f.to_s) %>"><%= Rack::Utils.escape_html(object.human_attribute_name(f.to_sym)) %></label>
						<input type="text" name="<%= Rack::Utils.escape_html(f.to_s) %>" value="<%= Rack::Utils.escape_html(item.send(f.to_sym).to_s) %>" />
					</div>
				<% end %>
			<% end %>
<%
		end
	end
end

%>
